<div class="page page-ui-grid" ng-controller="pickupReqCtrl">
  <!-- page controller -->
  <div class="pageheader">
    <h2>{{ 'Menu.PICKUP_REQUEST_DETAIL' | translate }} </h2>
    <div class="page-bar">
      <ul class="page-breadcrumb">
        <li>
          <a ui-sref="app.dashboard"><i class="fa fa-home"></i>Home</a>
        </li>
        <li>
          <a href="javascript:;">Transaction</a>
        </li>
        <li>
          <a ui-sref="app.transaction.serviceRequest">{{ 'Menu.PICKUP_REQUEST_DETAIL' | translate }} </a>
        </li>
      </ul>
    </div>
  </div>
  <!-- /page header -->

  <!-- page content -->
  <div class="pagecontent">
    <div class="row">
      <!-- page row -->
      <div class="col-md-12">
        <!-- page col -->

        <!-- tile -->
        <section class="tile" fullscreen="isFullscreen01">
          <!-- tile header -->
          <div class="tile-header dvd dvd-btm">
            <h1 class="custom-font"><strong>Service Request</strong></h1>
          </div>
          <!-- /tile header -->
          <!-- tile body -->
          <div class="tile-body">
            <form class="form-horizontal" role="form">
              <label class="col-sm-3 control-label"><strong>IMEI / Serial number</strong></label>
              <div class="input-group col-sm-6">
                <input type="text" class="form-control" ng-model="imeiNumber" maxlength="15" minlength="12">
                <span class="input-group-btn">
                  <button class="btn btn-success" type="submit" ng-click="imeiNumberFn(imeiNumber)" ng-disabled="!imeiNumber || isSubmit">Proceed</button>
                </span>
              </div>
            </form>
          </div>
        </section>
        <!-- /tile body -->
        <section class="tile" fullscreen="isFullscreen02" ng-if="isFetch">
          <div class="tile-header dvd dvd-btm">
            <h1 class="custom-font">Customer Details:</h1>
            <ul class="controls">
              <li uib-dropdown on-toggle="toggled(open)">
                <a href tile-control-toggle>
                  <span class="minimize" id="min"><fa name="angle-down"></fa>&nbsp;&nbsp;&nbsp;Minimize</span>
                  <span class="expand"><fa name="angle-up"></fa>&nbsp;&nbsp;&nbsp;Expand</span>
                </a>
              </li>
            </ul>
          </div>
          <div class="tile-body">
            <form class="form-horizontal" role="form">
              <div class="row">
                <!-- <div class="col-md-12">
                  <div class="form-group">
                    <label class="col-sm-3 control-label" style="text-align:middle">Client Id</label>
                    <div class="col-sm-7">
                      <input type="text" class="form-control underline-input" ng-model="fetch.clientId" >
                    </div>
                  </div> -->
                <div class="col-md-6">
                  <div class="form-group">
                    <label class="col-sm-4 control-label" style="text-align:left">Name</label>
                    <div class="col-sm-6">
                      <input type="text" class="form-control underline-input" ng-model="fetch.customerName" disabled="fetch.customerName">
                    </div>
                  </div>
                  <div class="form-group">
                    <label class="col-sm-4 control-label" style="text-align:left">Email Id</label>
                    <div class="col-sm-6">
                      <input type="text" class="form-control underline-input" ng-model="fetch.emailId" disabled="fetch.emailId">
                    </div>
                  </div>
                </div>
                <!-- /col-md-6 -->
                <div class="col-md-6">
                  <div class="form-group">
                    <label class="col-sm-4 control-label" style="text-align:left">Contact Number</label>
                    <div class="col-sm-6">
                      <input type="text" class="form-control underline-input" ng-model="fetch.contactNo" disabled="fetch.contactNo">
                    </div>
                  </div>
                  <div class="form-group">
                    <label class="col-sm-4 control-label" style="text-align:left">Alternate Number</label>
                    <div class="col-sm-6">
                      <input type="text" maxlength="12" minlength="10"  number-only class="form-control underline-input" ng-model="fetch.alternateContactNo" ng-disabled="isAlternateNumberExist">
                    </div>
                  </div>
                </div>
                <!-- /col-md-6 -->
              </div>
              <!-- /row-->
                <!-- /col-md-6 -->
              <div class="row">
                <div class="col-md-10">
                  <div class="form-group">
                    <label class="col-sm-6 control-label">Preferred Contact :<b><span style="color:red">*</span></b></label>
                    <div class="col-sm-2">
                      <label class="checkbox checkbox-custom checkbox-custom-sm">
                        <input name="customRadioForCont" type="radio" ng-model="radioPrefCont" ng-change="prefContact ( 'contact')" value="contact"><i></i> Contact No </label>
                    </div>
                    <div class="col-sm-3">
                      <label class="checkbox checkbox-custom checkbox-custom-sm">
                        <input name="customRadioForCont" type="radio" ng-model="radioPrefCont" ng-change="prefContact ( 'alternate')" value="alternate"><i></i> Alternate Contact No </label>
                    </div>
                  </div>
                </div>
                <!-- /col-md-6 -->
              </div>
              <hr>
              <div class="row">
                <div class="col-md-8">
                  <div class="form-group">
                    <label class="col-sm-6 control-label">Service Request Options:<b><span style="color:red">*</span></b></label>
                    <div class="col-sm-3">
                      <label class="checkbox checkbox-custom checkbox-custom-sm">
                        <input name="customRadio1" type="radio" ng-model="fetch.senario" ng-change=radio1Value ( 'carryIn') value="carryIn"><i></i> Carry In </label>
                    </div>
                    <!-- <div class="col-sm-2"> -->
                      <!-- <label class="checkbox checkbox-custom checkbox-custom-sm">
                        <input name="customRadio1" type="radio" ng-model="fetch.senario" ng-change=radio1Value ( 'stolen') value="stolen"><i></i> Stolen </label> -->
                    <!-- </div> -->
                    <div class="col-sm-3">
                      <label class="checkbox checkbox-custom checkbox-custom-sm">
                        <input name="customRadio1" type="radio" ng-model="fetch.senario" ng-change=radio1Value ( 'serviceCall') value="serviceCall"><i></i> Pickup Drop </label>
                    </div>
                  </div>
                </div>
                <!-- /col-md-6 -->
              </div>
              <hr>
              <!-- <hr> -->
              <div class="row" ng-if="fetch.senario != 'stolen' && fetch.senario != 'carryIn'">
                <div class="col-md-8">
                  <div class="form-group">
                    <label class="col-sm-6 control-label">Collect from and Deliver to:</label>
                    <div class="col-sm-3">
                      <label class="checkbox checkbox-custom checkbox-custom-sm">
                        <input name="customRadio" type="radio" ng-model="radioF" ng-change="radioValue('given')" value="given"><i></i> Given Address </label>
                    </div>
                    <div class="col-sm-3">
                      <label class="checkbox checkbox-custom checkbox-custom-sm">
                        <input name="customRadio" type="radio" ng-model="radioF" ng-change="radioValue('alter')" value="alter"><i></i> Alternate Address </label>
                    </div>
                  </div>
                </div>
                <!-- /col-md-6 -->
              </div>
              <div class="row" ng-if="fetch.senario != 'stolen' && fetch.senario != 'carryIn'">
                <div class="col-md-11" ng-switch="radioF">
                  <div class="form-group">
                    <div ng-switch-when="given">
                      <label class="col-sm-2 control-label">Address:</label>
                      <div class="col-sm-10">
                        <textarea class="form-control" ng-model="fetch.address1" ng-disabled="radioF =='given'">
                        </textarea>
                      </div>
                    </div>
                    <div ng-switch-when="alter">
                      <label class="col-sm-2 control-label">Address: <b><span style="color:red">*</span></b></label>
                      <div class="col-sm-10">
                        <textarea class="form-control" ng-model="fetch.address2">
                        </textarea>
                      </div>
                    </div>
                  </div>
                </div>
                <!-- /col-md-6 -->
              </div>
              <!-- /row-->
              <div class="row" ng-if="fetch.senario != 'stolen' && fetch.senario != 'carryIn'">
                <div class="col-md-6">
                  <div class="form-group">
                    <div ng-if="radioF=='given'">
                      <label class="col-sm-4 control-label">Pincode</label>
                      <div class="col-sm-6">
                        <input type="text" class="form-control underline-input" ng-model="fetch.pincode" ng-disabled="radioF=='given'">
                      </div>
                    </div>
                    <div ng-if="radioF=='alter'">
                      <label class="col-sm-4 control-label">Pincode<b><span style="color:red">*</span></b></label>
                      <div class="col-sm-6">
                        <input type="text" class="form-control underline-input" ng-model="fetch.pincode2" ng-change="zipChange(fetch.pincode2);" maxlength="6" number-only>
                        <p class="help-block">
                          <span class="text-red" ng-if="fetch.pincode2==''">Error: Zip is required.</span>
                          <span class="text-red" ng-if=" zipError">{{zipError}}</span>
                        </p>
                      </div>
                    </div>
                  </div>
                  <div class="form-group">
                    <label class="col-sm-4 control-label">State</label>
                    <div class="col-sm-6" ng-if="radioF=='given'">
                      <input type="text" class="form-control underline-input" ng-model="results.state" disabled="results.state">
                    </div>
                    <div class="col-sm-6" ng-if="radioF=='alter'">
                      <input type="text" class="form-control underline-input" ng-model="zip2Res.state" disabled="zip2Res.state">
                    </div>
                  </div>
                </div>
                <!-- /col-md-6 -->
                <div class="col-md-6">
                  <div class="form-group">
                    <label class="col-sm-4 control-label">District</label>
                    <div class="col-sm-6" ng-if="radioF=='given'">
                      <input type="text" class="form-control underline-input" ng-model="results.district" disabled="results.district">
                    </div>
                    <div class="col-sm-6" ng-if="radioF=='alter'">
                      <input type="text" class="form-control underline-input" ng-model="zip2Res.district" disabled="zip2Res.district">
                    </div>
                  </div>
                  <div class="form-group">
                    <label class="col-sm-4 control-label">Country</label>
                    <div class="col-sm-6" ng-if="radioF=='given'">
                      <input type="text" class="form-control underline-input" ng-model="results.country" disabled="results.country">
                    </div>
                    <div class="col-sm-6" ng-if="radioF=='alter'">
                      <input type="text" class="form-control underline-input" ng-model="zip2Res.country" disabled="zip2Res.country">
                    </div>
                  </div>
                </div>
                <!-- /col-md-6 -->
              </div>
              <!-- /row-->
            </form>
          </div>
        </section>

        <!-- ============================================================================================== -->
        <!-- tile body -->
        <section class="tile" fullscreen="isFullscreen03" ng-if="isFetch">
          <div class="tile-header dvd dvd-btm">
            <h1 class="custom-font">Device Details:</h1>
            <ul class="controls">
              <li uib-dropdown on-toggle="toggled(open)">
                <a href tile-control-toggle>
                  <span class="minimize" id="min"><fa name="angle-down"></fa>&nbsp;&nbsp;&nbsp;Minimize</span>
                  <span class="expand"><fa name="angle-up"></fa>&nbsp;&nbsp;&nbsp;Expand</span>
                </a>
              </li>
            </ul>
          </div>
          <div class="tile-body">
            <!-- title body -->
            <form class="form-horizontal" role="form">
              <div class="row">
                <div class="col-md-6">
                  <div class="form-group">
                    <label class="col-sm-4 control-label" style="text-align:left">Oem</label>
                    <div class="col-sm-7">
                      <input type="text" class="form-control underline-input" ng-model="fetch.oemName" disabled="fetch.oem">
                    </div>
                  </div>
                  <div class="form-group">
                    <label class="col-sm-4 control-label" style="text-align:left">Model</label>
                    <div class="col-sm-7">
                      <input type="text" class="form-control underline-input" ng-model="fetch.modelName" disabled="fetch.modelName">
                    </div>
                  </div>
                  <div class="form-group">
                    <label class="col-sm-4 control-label" style="text-align:left">Ticket Type</label>
                    <div class="col-sm-7">
                      <input type="text" class="form-control underline-input" ng-model="fetch.ticketType" disabled="fetch.ticketType">
                    </div>
                  </div>
                  <div class="form-group">
                    <label class="col-sm-4 control-label" style="text-align:left">Customer ID</label>
                    <div class="col-sm-7">
                      <input type="text" class="form-control underline-input" ng-model="customerId" disabled="fetch.customerId">
                    </div>
                  </div>
                  <div class="form-group">
                    <label class="col-sm-4 control-label" style="text-align:left">Membership Date</label>
                    <div class="col-sm-7">
                      <input type="text" class="form-control underline-input" ng-model="membershipDate" disabled="fetch.membershipDate">
                    </div>
                  </div>
                </div>
                <!-- /col-md-6 -->
                <div class="col-md-6">
                  <div class="form-group">
                    <label class="col-sm-4 control-label" style="text-align:left">Product</label>
                    <div class="col-sm-7">
                      <input type="text" class="form-control underline-input" ng-model="fetch.productName" disabled="fetch.productName">
                    </div>
                  </div>
                  <div class="form-group">
                    <label class="col-sm-4 control-label" style="text-align:left">Damage Date<b><span style="color:red">*</span></b></label>
                    <div class="col-sm-5">
                      <input type="text" readonly="readonly" class="form-control" uib-datepicker-popup="{{format}}" ng-model-options="{timezone: 'UTC'}" ng-model="fetch.damageDate" datepicker-options="dateOptions" is-open="popup1.opened" ng-required="true" max-date="{{dtmax}}" />
                    </div>
                    <div class="col-sm-2">
                      <span class="input-group-btn">
                         <button type="button" class="btn btn-default" ng-click="open1()"><i class="glyphicon glyphicon-calendar"></i></button>
                     </span>
                    </div>
                  </div>
                  <div class="form-group">
                    <label class="col-sm-4 control-label" style="text-align:left">Customer Plan</label>
                    <div class="col-sm-7">
                      <input type="text" class="form-control underline-input" ng-model="fetch.planName" disabled="fetch.planName">
                    </div>
                  </div>
                  <div class="form-group">
                    <label class="col-sm-4 control-label" style="text-align:left">Membership ID</label>
                    <div class="col-sm-7">
                      <input type="text" class="form-control underline-input" ng-model="memberId" disabled="fetch.memberId">
                    </div>
                  </div>
                  <div class="form-group">
                    <div class="col-sm-12">
                      <label class="checkbox checkbox-custom-alt checkbox-custom-sm">
                        <input type="checkbox" ng-model="fetch.loaner" ng-disabled="fetch.senario == 'stolen'"><i></i> Loaner Device </label>
                    </div>
                  </div>
                </div>
                <!-- /col-md-6 -->
              </div>
              <div class="row">
                <div class="col-md-12">
                  <label>Remarks: </label>
                  <textarea ng-model="fetch.remarks" class="form-control" placeholder="Add your remarks here." aria-invalid="false"></textarea>
                </div>
              </div>
              <hr>
              <div class="panel-body col-md-12" ng-if="fetch.senario != 'stolen' ">
                <div class="col-sm-4" style="text-align:center;margin-left:2%">
                  <div class="form-group">
                    <label>Problem Category : <b><span style="color:red">*</span></b></label>
                    <select class="form-control" ng-model="fetch.problemCategory" ng-change="getProblemCategory(fetch.problemCategory)">
                      <option value="">---- Select Problem Category ----</option>
                      <option ng-repeat="pCategory in problemCat" value="{{pCategory.problemCatCode}}">
                        {{pCategory.problemCatName}}</option>
                    </select>
                  </div>
                </div>
                <div class="col-sm-1"></div>
                <div class="col-sm-4" style="text-align:center;margin-left:2%">
                  <div class="form-group">
                    <label>Problem Description : <b><span style="color:red">*</span></b></label>
                    <select class="form-control" ng-model="fetch.problemDes">
                      <option value="">---- Select Problem Type ----</option>
                      <option ng-repeat="problem in problemDescription" value="{{problem.Id}}">
                        {{problem.problemDescription}}</option>
                    </select>
                  </div>
                </div>
                <div class="col-sm-2" style="text-align:center">
                  <br>
                  <button type="button" ng-disabled="!fetch.problemDes" class="btn btn-primary" ng-click="addProblem(fetch.problemCategory,fetch.problemDes)" title="Add"> Add </button>
                </div>
                <div class="col-md-12" style="text-align:center;margin-top:2%;">
                  <div class="table-responsive">
                    <table class="table table-striped table-bordered table-hover" id="tblProblem" style="text-align:left;" ng-show="tblProblem">
                      <thead>
                        <tr>
                          <th>Problem Category</th>
                          <th>Problem Type</th>
                          <th>Action</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr ng-repeat="prob in problemData">
                          <td>{{prob.category}}</td>
                          <td>{{prob.type}}</td>
                          <td>
                            <button type="button" ng-click="removeProblem(prob.category, prob.type, $index)" class="btn btn-danger">
                              Remove
                            </button>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
                <div class="col-md-12">
                  <br>
                  <label>Other Problems : </label>
                  <textarea ng-model="fetch.otherProblem" class="form-control" placeholder="Add your problem not listed in Problem Type" aria-invalid="false"></textarea>
                </div>
              </div>
              <div class="row">
                <div class="form-group" style="text-align:center;">
                  <div class="col-md-12">
                    <button class="btn btn-primary" ng-click="submitFn()" ng-disabled="isSubmit ||
                    (fetch.senario != 'stolen' && problemData.length == 0) ||
                    (radioF == 'given' && (!fetch.address1 || !fetch.pincode)) ||
                    (radioF == 'alter'&& (!fetch.address2 || !fetch.pincode2 || !zip2Res.district)) ||
                    !fetch.damageDate || !fetch.senario || !radioPrefCont" >
                      Submit
                    </button>
                    <a class="btn btn-danger" ng-click="cancelFn()">Cancel</a>
                  </div>
                </div>
              </div>
            </form>
          </div>
          <!-- /title body -->
        </section>
      </div>
      <!-- /page col -->
    </div>
    <!--/page row  -->
  </div>
  <!-- /page content -->
</div>
<!-- page controller -->
